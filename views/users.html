{% extends './layout.html' %}
{% block content %}
  <form method='post' action='/users' class='well'>
    <div class='form-group'>
      <input name='name' placeholder='user name' class='form-control'/>
    </div>
    <button class='btn btn-primary btn-xs'>Add User</button>
  </form>
  <div class='row'>
    {% for user in users %}
    <div class='col-sm-3'>
      <div class='panel panel-default'>
        <div class='panel-heading'>
      {{ user.name }}
      <form method='POST' action='/users/{{user.id}}?_method=DELETE'>
        <button class='btn btn-danger btn-xs'>Delete</button>
      </form>
        </div>
      <div class='panel-body'>
      <form method='post' action='/users/{{ user.id }}/awards'>
        <button class='btn btn-primary btn-xs'>Create an award</button>
      </form>
      <ul>
        {% for award in user.awards %}
          <li>
            {{ award.text }}
            <form method='POST' action='/users/{{user.id}}/awards/{{award.id}}?_method=DELETE'>
              <button class='btn btn-warning btn-xs'>Delete award</button>
            </form>
          </li>  
        {% endfor %}
      </ul>
      {% if user.mentorId %}
        <div class='label label-default'>
        Mentored by: 
        {{ user.mentor.name }}
        </div>
        <p>
        <form method='POST' action='/users/{{user.id}}?_method=PUT'>
          <input type='hidden' name='mentorId' value=''/>
          <button class='btn btn-warning'>
            Remove Mentor
          </button>
        </form>
        </p>
      {% endif %}
      {% if !user.mentorId && availableMentorsMap[user.id].length %}
        <form method='POST' action='/users/{{user.id}}?_method=PUT' class='well'>
          <div class='form-group'>
          <select class='form-control' name='mentorId'>
            {% for mentor in availableMentorsMap[user.id] %}
              <option value='{{ mentor.id }}'>{{ mentor.name }}</option>
            {% endfor %}
          </select>
          </div>
          <button class='btn btn-primary btn-sm'>Set as mentor</button>
        </form>
      {% endif %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
{% endblock %}
